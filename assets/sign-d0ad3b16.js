import{d as g,r as i,t as $,A as k,_ as v,o as C,f as w,k as _,Z as y,g as r,w as c,j as h,l as E,E as M}from"./index-eb619e6a.js";const U=g({props:{modelValue:String,signColor:String,signBgColor:String},emits:["update:modelValue","success"],setup(e,n){let t,s,l,d,a=i(null);const o=i(""),f=i(!1),m="sign"+new Date().getTime();$(()=>{t=document.getElementById(m),t&&(l=t.offsetWidth,d=t.offsetHeight,t.width=l,t.height=d,s=t.getContext("2d"),a.value=s,s.fillStyle=e.signColor||"#fff",s.fillRect(0,0,l,l),s.save(),s.strokeStyle=e.signBgColor||"#000",s.lineWidth=1)});const p=i(!1);return{handleDown:u=>{s.beginPath(),s.moveTo(u.offsetX,u.offsetY),p.value=!0},handleMove:u=>{p.value&&(s.lineTo(u.offsetX,u.offsetY),s.stroke())},handleUp:()=>{p.value=!1},handleClear:()=>{s.clearRect(0,0,l,d)},handleCreateImg:()=>{o.value=t.toDataURL("image/jpeg"),o.value&&(k.success("生成图片成功！"),n.emit("update:modelValue",o.value),n.emit("success",o.value))},id:m,ctxRef:a,baseUrl:o,isDialog:f}}}),V={style:{width:"100%",position:"relative"}},B=["id"];function D(e,n,t,s,l,d){const a=E;return C(),w("div",V,[_("canvas",{id:e.id,onMousedown:n[0]||(n[0]=(...o)=>e.handleDown&&e.handleDown(...o)),onMousemove:n[1]||(n[1]=(...o)=>e.handleMove&&e.handleMove(...o)),onMouseup:n[2]||(n[2]=(...o)=>e.handleUp&&e.handleUp(...o)),onMouseleave:n[3]||(n[3]=(...o)=>e.handleUp&&e.handleUp(...o)),style:{width:"100%",height:"400px",border:"1px solid #000"}},null,40,B),y(e.$slots,"default",{ctx:e.ctxRef},()=>[r(a,{type:"primary",onClick:e.handleClear},{default:c(()=>n[4]||(n[4]=[h("清除画布")])),_:1,__:[4]},8,["onClick"]),r(a,{type:"primary",onClick:e.handleCreateImg},{default:c(()=>n[5]||(n[5]=[h("生成图片")])),_:1,__:[5]},8,["onClick"])])])}const S=v(U,[["render",D]]),R=g({components:{CanvasSign:S},setup(){return{url:i(""),handleSuccess:t=>{}}}}),T={class:"app-container"};function b(e,n,t,s,l,d){const a=S,o=M;return C(),w("div",T,[r(o,{shadow:e.defaultData.cardShadow},{default:c(()=>[r(a,{modelValue:e.url,"onUpdate:modelValue":n[0]||(n[0]=f=>e.url=f),onSuccess:e.handleSuccess},null,8,["modelValue","onSuccess"])]),_:1},8,["shadow"])])}const Y=v(R,[["render",b]]);export{Y as default};
